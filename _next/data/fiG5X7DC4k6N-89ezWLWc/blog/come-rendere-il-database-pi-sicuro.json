{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var p=Object.create;var t=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var c=n=>t(n,\"__esModule\",{value:!0});var g=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports),N=(n,i)=>{c(n);for(var s in i)t(n,s,{get:i[s],enumerable:!0})},k=(n,i,s)=>{if(i&&typeof i==\"object\"||typeof i==\"function\")for(let a of m(i))!h.call(n,a)&&a!==\"default\"&&t(n,a,{get:()=>i[a],enumerable:!(s=d(i,a))||s.enumerable});return n},b=n=>k(c(t(n!=null?p(u(n)):{},\"default\",n&&n.__esModule&&\"default\"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var l=g((x,r)=>{r.exports=_jsx_runtime});var f={};N(f,{default:()=>q,frontmatter:()=>z});var e=b(l()),z={title:\"Come rendere il database pi\\xF9 sicuro\",date:\"2011-05-09T07:30:00+01:00\",status:\"publish\",permalink:\"/come-rendere-il-database-pi-sicuro\",author:\"Maico Orazio\",excerpt:\"\",type:\"post\",id:657,images:\"/static/images/posts/sql-inject.jpg\",category:[\"MySQL\",\"PHP\"],tag:[\"php\",\"mysql\"],post_format:[]};function v(n={}){let{wrapper:i}=n.components||{};return i?(0,e.jsx)(i,Object.assign({},n,{children:(0,e.jsx)(s,{})})):s();function s(){let a=Object.assign({div:\"div\",p:\"p\",strong:\"strong\",pre:\"pre\",code:\"code\",span:\"span\",br:\"br\",a:\"a\"},n.components),{Image:o}=a;return o||S(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(a.div,{children:(0,e.jsx)(o,{alt:\"SQL inject\",src:\"/static/images/posts/sql-inject.jpg\",width:\"600\",height:\"260\"})}),(0,e.jsxs)(a.p,{children:[\"Se hai un sito web in cui memorizzi dati dell\\u2019utente \\xE8 probabile che utilizzi un database, come MySQL, SQLite o altro, ed \\xE8 importante assicurarsi che il proprio \",(0,e.jsx)(a.strong,{children:\"database sia sicuro\"}),\" da e per gli utenti.\"]}),(0,e.jsx)(a.p,{children:\"Creare istruzioni di query al volo come la sequente:\"}),(0,e.jsx)(a.pre,{className:\"language-php\",children:(0,e.jsx)(a.code,{className:\"language-php code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token variable\",children:\"$sql\"}),\" \",(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(a.span,{className:\"token string double-quoted-string\",children:'\"INSERT INTO commenti (nome, commento) VALUES (\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\".\"}),(0,e.jsx)(a.span,{className:\"token variable\",children:\"$nome\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\".\"}),(0,e.jsx)(a.span,{className:\"token string double-quoted-string\",children:'\",\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\".\"}),(0,e.jsx)(a.span,{className:\"token variable\",children:\"$commento\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\".\"}),(0,e.jsx)(a.span,{className:\"token string double-quoted-string\",children:'\")\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,e.jsxs)(a.p,{children:[\"\\xE8 considerata una cattiva pratica che pu\\xF2 essere facilmente superata, eliminando la maggior parte dei problemi, utilizzando \",(0,e.jsx)(a.strong,{children:\"dichiarazioni SQL prepare\"}),\".\"]}),(0,e.jsxs)(a.p,{children:[\"Realizzare istruzioni SQL come la precedente pu\\xF2 essere rischioso. Se un utente malizioso invia, tramite il modulo del commento, una istruzione SQL appositamente predisposta, \\xE8 possibile eseguire query al database. Invece, \\xE8 necessario utilizzare \",(0,e.jsx)(a.strong,{children:\"dichiarazioni prepare\"}),\" come questa:\"]}),(0,e.jsx)(a.pre,{className:\"language-php\",children:(0,e.jsx)(a.code,{className:\"language-php code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token variable\",children:\"$sql\"}),\" \",(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(a.span,{className:\"token variable\",children:\"$db\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,e.jsx)(a.span,{className:\"token function\",children:\"prepare\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(a.span,{className:\"token string single-quoted-string\",children:\"'INSERT INTO commenti (nome, commento) VALUES (?,?)'\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,e.jsx)(a.p,{children:\"aggiungere poi i valori singolarmente\"}),(0,e.jsx)(a.pre,{className:\"language-php\",children:(0,e.jsxs)(a.code,{className:\"language-php code-highlight\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token variable\",children:\"$sql\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,e.jsx)(a.span,{className:\"token function\",children:\"bindParam\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(a.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(a.span,{className:\"token variable\",children:\"$nome\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token variable\",children:\"$sql\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,e.jsx)(a.span,{className:\"token function\",children:\"bindParam\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(a.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(a.span,{className:\"token variable\",children:\"$commento\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,e.jsx)(a.p,{children:\"e infine eseguire la query\"}),(0,e.jsx)(a.pre,{className:\"language-php\",children:(0,e.jsx)(a.code,{className:\"language-php code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token variable\",children:\"$sql\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"->\"}),(0,e.jsx)(a.span,{className:\"token function\",children:\"execute\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,e.jsxs)(a.p,{children:[\"Si trattano di poche righe in pi\\xF9, ma che rendono il vostro \",(0,e.jsx)(a.strong,{children:\"codice molto pi\\xF9 sicuro\"}),\".\"]}),(0,e.jsxs)(a.p,{children:[\"Non solo il database deve essere al sicuro contro le query non intenzionali, ma anche gli utenti.\",(0,e.jsx)(a.br,{}),\"Se qualcuno \\xE8 in grado di memorizzare un commento che sar\\xE0 visualizzato da tutti gli altri utenti, allora l\\u2019input deve essere limitato a quello che ci aspettiamo, come in questo caso solo testo. Se invece permettiamo di scrivere codice HTML, un utente malizioso potrebbe caricare un malware da un altro sito, il classico exploit XSS.\"]}),(0,e.jsxs)(a.p,{children:[\"Una soluzione semplice pu\\xF2 essere l\\u2019utilizzo di funzioni per \",(0,e.jsx)(a.strong,{children:\"sterilizzare l\\u2019input\"}),\", dunque sostituire, come nel caso citato, i tag HTML con quelli innocui.\",(0,e.jsx)(a.br,{}),\"Ad esempio, in un codice PHP che si interfaccia con un database MySQL \\xE8 possibile utilizzare:\"]}),(0,e.jsx)(a.pre,{className:\"language-php\",children:(0,e.jsx)(a.code,{className:\"language-php code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token variable\",children:\"$nome\"}),\" \",(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(a.span,{className:\"token function\",children:\"mysql_real_escape_string\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(a.span,{className:\"token global\",children:\"$_POST\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(a.span,{className:\"token string single-quoted-string\",children:\"'nome'\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,e.jsx)(a.p,{children:\"che inserisce l\\u2019escape davanti a caratteri speciali in una istruzione SQL.\"}),(0,e.jsxs)(a.p,{children:[\"Puoi leggere l\\u2019articolo su come \",(0,e.jsx)(a.a,{href:\"/blog/utilizzare-piu-istruzioni-sql-prepare-con-php-mysqli/\",title:\"Utilizzare pi\\xF9 istruzioni SQL prepare con PHP\",children:\"utilizzare pi\\xF9 istruzioni SQL prepare con PHP\"}),\" per approfondire l\\u2019argomento, e risolvere il problema di utilizzare pi\\xF9 dichiarazioni SQL prepare per l\\u2019esecuzione.\"]})]})}}var q=v;function S(n,i){throw new Error(\"Expected \"+(i?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return f;})();\n;return Component;","toc":[],"frontMatter":{"readingTime":{"text":"3 min read","minutes":2.085,"time":125100,"words":417},"slug":"come-rendere-il-database-pi-sicuro","fileName":"come-rendere-il-database-pi-sicuro.md","title":"Come rendere il database pi√π sicuro","date":"2011-05-09T06:30:00.000Z","status":"publish","permalink":"/come-rendere-il-database-pi-sicuro","author":"Maico Orazio","excerpt":"","type":"post","id":657,"images":"/static/images/posts/sql-inject.jpg","category":["MySQL","PHP"],"tag":["php","mysql"],"post_format":[]}},"authorDetails":[{"readingTime":{"text":"2 min read","minutes":1.7,"time":102000,"words":340},"slug":["default"],"fileName":"default.md","name":"Maico Orazio","avatar":"/static/images/avatar.png","occupation":"Senior Web Application Developer","company":"weBeetle","companyLink":"https://www.webeetle.com","email":"maico.orazio@gmail.com","linkedin":"https://www.linkedin.com/in/maicoorazio","twitter":"https://twitter.com/mainick","github":"https://github.com/mainick","devto":"https://dev.to/mainick","date":null}],"prev":{"title":"Menu Verticale con Effetto Fisarmonica &#8211; versione history","date":"2011-04-22T06:30:30.000Z","status":"publish","permalink":"/menu-verticale-con-effetto-fisarmonica-versione-history","author":"Maico Orazio","excerpt":"","type":"post","id":606,"images":"/static/images/posts/menu-verticale-jquery.jpg","category":["javascript","jQuery"],"tag":["javascript","jQuery"],"post_format":[],"slug":"menu-verticale-con-effetto-fisarmonica-versione-history"},"next":{"title":"Applicazioni Web Offline con HTML5","date":"2011-06-20T06:00:00.000Z","status":"publish","permalink":"/applicazioni-web-offline-con-html5","author":"Maico Orazio","excerpt":"","type":"post","id":722,"images":"/static/images/posts/web-application-offline.jpg","category":["HMTL5","javascript"],"tag":["cache","cache manifest","html5","web application offline"],"post_format":[],"slug":"applicazioni-web-offline-con-html5"}},"__N_SSG":true}