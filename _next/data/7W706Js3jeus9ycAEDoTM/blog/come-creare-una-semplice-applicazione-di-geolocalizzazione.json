{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var p=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var t=a=>l(a,\"__esModule\",{value:!0});var N=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),k=(a,s)=>{t(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},g=(a,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of m(s))!u.call(a,n)&&n!==\"default\"&&l(a,n,{get:()=>s[n],enumerable:!(c=d(s,n))||c.enumerable});return a},y=a=>g(t(l(a!=null?p(h(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var r=N((b,i)=>{i.exports=_jsx_runtime});var j={};k(j,{default:()=>f,frontmatter:()=>v});var e=y(r()),v={title:\"Come creare una semplice applicazione di geolocalizzazione\",date:\"2012-03-12T07:30:52+01:00\",status:\"publish\",permalink:\"/come-creare-una-semplice-applicazione-di-geolocalizzazione\",author:\"Maico Orazio\",excerpt:\"\",type:\"post\",id:745,images:\"/static/images/posts/W3C-Geolocation-API.jpg\",category:[\"HMTL5\",\"javascript\"],tag:[\"javascript\",\"html5\"],post_format:[]};function z(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({div:\"div\",p:\"p\",a:\"a\",strong:\"strong\",pre:\"pre\",code:\"code\",span:\"span\",h2:\"h2\"},a.components),{Image:o}=n;return o||w(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.div,{children:(0,e.jsx)(o,{alt:\"\",src:\"/static/images/posts/W3C-Geolocation-API.jpg\",width:\"500\",height:\"385\"})}),(0,e.jsxs)(n.p,{children:[\"Qui vi mostrer\\xF2 come utilizzare la nuova \",(0,e.jsx)(n.a,{href:\"http://dev.w3.org/geo/api/spec-source.html\",title:\"Geolocation API Specification\",children:\"Geolocation API\"}),\", insieme alle \",(0,e.jsx)(n.strong,{children:\"API di Google Maps\"}),\", per individuare la \",(0,e.jsx)(n.strong,{children:\"posizione dell\\u2019utente e visualizzare una mappa con quella posizione\"}),\".\"]}),(0,e.jsxs)(n.p,{children:[\"Dopo che la mappa \\xE8 pronta, vi mostrer\\xF2 come \",(0,e.jsx)(n.strong,{children:\"aggiungere un marker\"}),\" e come \",(0,e.jsx)(n.strong,{children:\"recuperare ulteriori informazioni sulla posizione dell\\u2019utente con una Reverse Geolocation\"}),\".\"]}),(0,e.jsx)(n.p,{children:\"Per prima cosa, diamo uno sguardo alle risorse da collegare alla nostra pagina necessari per sviluppare l\\u2019esempio:\"}),(0,e.jsx)(n.pre,{className:\"language-html\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-html\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"<!-- googlemap API: fundamental to show the map -->\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"script\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"src\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"http://maps.google.com/maps/api/js?sensor=true\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),(0,e.jsx)(n.span,{className:\"token script\",children:(0,e.jsx)(n.span,{className:\"token language-javascript\",children:`\n`})})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token script\",children:(0,e.jsxs)(n.span,{className:\"token language-javascript\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"--\"}),\"mce\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"--\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),`\n`]})})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token script\",children:(0,e.jsx)(n.span,{className:\"token language-javascript\"})}),(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"script\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Google Maps API V3\"}),\" script to visualise, modify and enrich our maps.\"]}),(0,e.jsxs)(n.h2,{id:\"documento-html\",children:[(0,e.jsx)(n.a,{href:\"#documento-html\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Documento HTML\"]}),(0,e.jsx)(n.p,{children:\"Questo \\xE8 tutto il contenuto della nostra pagina html:\"}),(0,e.jsx)(n.pre,{className:\"language-html\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-html\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"div\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"id\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"map\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"<\"}),\"img\"]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"id\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"mapAjaxLoader\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"src\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"img/ajax-loader.gif\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"alt\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"loader\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"width\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"32\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"height\"}),(0,e.jsxs)(n.span,{className:\"token attr-value\",children:[(0,e.jsx)(n.span,{className:\"token punctuation attr-equals\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'}),\"32\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:'\"'})]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"/>\"})]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsxs)(n.span,{className:\"token tag\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"</\"}),\"div\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"})]}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"un div contenitore della mappa, che contiene l\\u2019immagini di loading che faremo visualizzare fino al caricamento dinamico della mappa di Google nel div \",(0,e.jsx)(n.code,{children:\"mapHolder\"}),\".\"]}),(0,e.jsxs)(n.h2,{id:\"foglio-di-stile-css\",children:[(0,e.jsx)(n.a,{href:\"#foglio-di-stile-css\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Foglio di stile CSS\"]}),(0,e.jsx)(n.p,{children:\"Nel foglio di stile collegato alla pagina indichiamo solo le dimensioni del contenitore mappa.\"}),(0,e.jsx)(n.pre,{className:\"language-css\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-css\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token selector\",children:(0,e.jsx)(n.span,{className:\"token id\",children:\"#mapHolder\"})}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"width\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"336\"}),(0,e.jsx)(n.span,{className:\"token unit\",children:\"px\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:\"height\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"224\"}),(0,e.jsx)(n.span,{className:\"token unit\",children:\"px\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"script-in-javascript\",children:[(0,e.jsx)(n.a,{href:\"#script-in-javascript\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Script in JavaScript\"]}),(0,e.jsx)(n.p,{children:\"Come prima cosa verifichiamo se il browser supporta le Geolocation API:\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// individuare il supporto del browser per Geolocation\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"navigator\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"geolocation\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!==\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'undefined'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"navigator\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"geolocation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"getCurrentPosition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"displayLocation\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" displayError\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"alert\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Il tuo browser non supporta geolocalizzazione.'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"il metodo \",(0,e.jsx)(n.code,{children:\"getCurrentPosition\"}),\" di \",(0,e.jsx)(n.code,{children:\"navigator.geolocation\"}),\" serve per rilevare la posizione del visitatore, al quale passiamo come parametri due funzioni che saranno chiamate a seconda del feedback dell\\u2019utente (se permette o rifiuta di rilevare la sua posizione):\"]}),(0,e.jsxs)(n.p,{children:[\"handler \",(0,e.jsx)(n.code,{children:\"displayLocation\"}),\" in caso di successo:\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"displayLocation\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"position\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" lat \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" position\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"coords\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"latitude\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" lon \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" position\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"coords\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"longitude\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// chiamiamo createMap con le coordinate della posizione individuata\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createMap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"position\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"coords\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"position\"}),\" \\xE8 l\\u2019oggetto generato automaticamente da \",(0,e.jsx)(n.code,{children:\"getCurrentPosition\"}),\", che ha due porpriet\\xE0 la latitudine \",(0,e.jsx)(n.code,{children:\"position.coords.latitude\"}),\" e longitudine \",(0,e.jsx)(n.code,{children:\"position.coords.longitude\"}),\". Ottenuto le coordinate creiamo la mappa tramite le API di Google Maps:\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createMap\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"coords\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// crea un oggetto LatLng\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" googleCoords \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"LatLng\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"coords\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"latitude\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" coords\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"longitude\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// opzioni da passare per la creazione della mappa\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" mapOpts \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    zoom\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"15\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//zoom della mappa\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    center\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" googleCoords\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// centro mappa\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    mapTypeId\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"MapTypeId\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"ROADMAP\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//tipo mappa [ROADMAP - SATELLITE - HYBRID]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" mapDiv \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"document\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"getElementById\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'mapHolder'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//crea oggetto mappa\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  map \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"Map\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"mapDiv\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" mapOpts\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"creare-un-marker-sulla-mappa-e-ottente-lindirizzo\",children:[(0,e.jsx)(n.a,{href:\"#creare-un-marker-sulla-mappa-e-ottente-lindirizzo\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Creare un marker sulla mappa e ottente l\\u2019indirizzo\"]}),(0,e.jsxs)(n.p,{children:[\"Per creare un \",(0,e.jsx)(n.strong,{children:\"marker sulla mappa ad indicare posizione individuata\"}),\", chiamiamo la funzione alla fine di \",(0,e.jsx)(n.code,{children:\"createMap\"}),\", passandogli l\\u2019oggetto mappa e le opzioni personalizzate:\"]}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// aggiunge un marker sulla mappa utilizzando google.maps.Marker\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"addMarker\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"map\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" googleCoords\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//opzioni per il marker\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" markerOpts \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    animation\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"Animation\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"BOUNCE\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//animazione marker [DROP / BOUNCE]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    position\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" googleCoords\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    map\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" map\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" marker \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"Marker\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"markerOpts\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"Possiamo recuperare ulteriori informazioni sulla posizione rilevata, ad esempio l\\u2019indirizzo. Dopo aver creato il marker, chiamiamo la funzione e gli passiamo le coordinate del marker:\"}),(0,e.jsx)(n.pre,{className:\"language-js\",children:(0,e.jsxs)(n.code,{className:\"language-js code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getCity\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"coords\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" point \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"LatLng\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"coords\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"latitude\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" coords\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"longitude\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//crea un nuovo oggetto Geocoder\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" geocoder \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[\"google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"maps\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"Geocoder\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  geocoder\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"geocode\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" latLng\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" point \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"results\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" status\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"status \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"==\"}),\" google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"maps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"GeocoderStatus\"})}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token constant\",children:\"OK\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"results\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//mettiamo l'indirizzo ricevuto in un div yourCITYdiv\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"document\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"getElementById\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'yourCITY'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"innerHTML\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" results\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"formatted_address\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"//in caso di errore\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token dom variable\",children:\"document\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access function method\",children:\"getElementById\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'yourCITY'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"innerHTML\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Ricerca indirizzo non riuscita: '\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"+\"}),` status\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"Nella funzione descritta sopra, definiamo un nuovo oggetto \",(0,e.jsx)(n.code,{children:\"Geocoder\"}),\". Analizziamo, tramite il metodo \",(0,e.jsx)(n.code,{children:\"geocode\"}),\", il punto definito dalle coordinate date in input alla funzione, se non si verificano errori il risultato restituir\\xE0 l\\u2019indirizzo dettagliato della posizione dell\\u2019utente in \",(0,e.jsx)(n.code,{children:\"results[1].formatted_address\"}),\".\"]}),(0,e.jsxs)(n.h2,{id:\"conclusioni\",children:[(0,e.jsx)(n.a,{href:\"#conclusioni\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusioni\"]}),(0,e.jsxs)(n.p,{children:[\"Questo \\xE8 solo un esempio di creazione della mappa utilizzando le \",(0,e.jsx)(n.strong,{children:\"Geolocation API di HTML5\"}),\" e quelle di \",(0,e.jsx)(n.strong,{children:\"Google Maps\"}),\". Creare una mappa \\xE8 abbastanza semplice, quindi \\xE8 possibile personalizzarla utilizzando tutti i tipi di metodi e propriet\\xE0 delle API; per saperne di pi\\xF9 date un\\u2019occhiata alla \",(0,e.jsx)(n.a,{href:\"http://code.google.com/intl/it-IT/apis/maps/documentation/javascript/\",title:\"Google Maps JavaScript API V3\",children:\"documentazione delle Google Maps JavaScript API V3\"}),\".\"]})]})}}var f=z;function w(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return j;})();\n;return Component;","toc":[{"value":"Documento HTML","url":"#documento-html","depth":2},{"value":"Foglio di stile CSS","url":"#foglio-di-stile-css","depth":2},{"value":"Script in JavaScript","url":"#script-in-javascript","depth":2},{"value":"Creare un marker sulla mappa e ottente l’indirizzo","url":"#creare-un-marker-sulla-mappa-e-ottente-lindirizzo","depth":2},{"value":"Conclusioni","url":"#conclusioni","depth":2}],"frontMatter":{"readingTime":{"text":"6 min read","minutes":5.285,"time":317100,"words":1057},"slug":"come-creare-una-semplice-applicazione-di-geolocalizzazione","fileName":"come-creare-una-semplice-applicazione-di-geolocalizzazione.md","title":"Come creare una semplice applicazione di geolocalizzazione","date":"2012-03-12T06:30:52.000Z","status":"publish","permalink":"/come-creare-una-semplice-applicazione-di-geolocalizzazione","author":"Maico Orazio","excerpt":"","type":"post","id":745,"images":"/static/images/posts/W3C-Geolocation-API.jpg","category":["HMTL5","javascript"],"tag":["javascript","html5"],"post_format":[]}},"authorDetails":[{"readingTime":{"text":"2 min read","minutes":1.74,"time":104400,"words":348},"slug":["default"],"fileName":"default.md","name":"Maico Orazio","avatar":"/static/images/avatar.png","occupation":"Senior Web Application Developer","company":"weBeetle","companyLink":"https://www.webeetle.com","email":"maico.orazio@gmail.com","linkedin":"https://www.linkedin.com/in/maicoorazio","twitter":"https://twitter.com/mainick","github":"https://github.com/mainick","devto":"https://dev.to/mainick","date":null}],"prev":{"title":"Semplici espressioni regolari","date":"2011-12-12T06:30:53.000Z","status":"publish","permalink":"/semplici-espressioni-regolari","author":"Maico Orazio","excerpt":"","type":"post","id":738,"images":"/static/images/posts/regular-expressions.jpg","category":["snippets"],"tag":["snippets","regular expressions"],"post_format":[],"slug":"semplici-espressioni-regolari"},"next":{"title":"MySQL Event Scheduler","date":"2012-12-17T06:30:12.000Z","status":"publish","permalink":"/mysql-event-scheduler","author":"Maico Orazio","excerpt":"","type":"post","id":760,"images":"/static/images/posts/snippets-mysql.jpg","category":["MySQL"],"tag":["event","MySQL"],"post_format":[],"_yoast_wpseo_content_score":["90"],"slug":"mysql-event-scheduler"}},"__N_SSG":true}